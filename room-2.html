<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Room - Firepit Fashion</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    @font-face {
      font-family: 'NeuePixelSans';
      src: url('NeuePixelSans.ttf') format('truetype');
    }
    
    body {
      margin: 0;
      padding: 0;
      background: #074244;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .wardrobe-scene {
      position: relative;
      width: 100vw;
      max-width: 1200px;
      aspect-ratio: 16/9;
    }
    
    .background {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      object-fit: contain;
      z-index: 1;
    }
    
    .character {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      object-fit: contain;
      z-index: 2;
    }
    
    .wardrobe-item {
      position: absolute;
      width: 10.5%; /* Main default size - 50% bigger */
      cursor: pointer;
      transition: transform 0.2s ease;
      z-index: 5;
    }
    
    .wardrobe-item:hover {
      transform: translateY(-10px);
    }
    
    .logo {
      position: absolute;
      top: 20px;
      left: 20px;
      width: 200px;
      z-index: 10; /* Increased for clickability */
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    
    .logo:hover {
      transform: scale(1.05);
    }
    
    .save-button {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 15px 30px;
      font-family: 'NeuePixelSans', sans-serif;
      font-size: 18px;
      border-radius: 10px;
      cursor: pointer;
      z-index: 10;
      transition: transform 0.2s ease;
    }
    
    .save-button:hover {
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <script>
    function addOutfit(outfitType) {
      console.log('Adding outfit:', outfitType);
      const existingOutfit = document.querySelector(`.outfit-overlay[data-outfit="${outfitType}"]`);
      if (existingOutfit) {
        console.log('Removing outfit:', outfitType);
        existingOutfit.remove();
      } else {
        console.log('Adding outfit:', outfitType);
        const outfitOverlay = document.createElement('img');
        outfitOverlay.src = `boys-cartoon-clothes/${outfitType}.png`;
        outfitOverlay.className = 'outfit-overlay';
        outfitOverlay.setAttribute('data-outfit', outfitType);
        outfitOverlay.style.position = 'absolute';
        outfitOverlay.style.top = '50%';
        outfitOverlay.style.left = '50%';
        outfitOverlay.style.transform = 'translate(-50%, -50%)';
        outfitOverlay.style.maxWidth = '100%';
        outfitOverlay.style.maxHeight = '100%';
        outfitOverlay.style.width = 'auto';
        outfitOverlay.style.height = 'auto';
        outfitOverlay.style.objectFit = 'contain';
        outfitOverlay.style.zIndex = '3';

        outfitOverlay.onerror = function() { console.error('Failed to load outfit image:', outfitType); };
        outfitOverlay.onload = function() { console.log('Outfit image loaded successfully:', outfitType); };
        document.body.appendChild(outfitOverlay);
      }
    }

    function getUrlParameter(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    window.addEventListener('load', function() {
      const character = getUrlParameter('character');
      const characterImg = document.getElementById('character');
      
      if (character) {
        switch(character) {
          case 'ace':
            characterImg.src = 'ace.png';
            break;
          case 'nick':
            characterImg.src = 'nick.png';
            break;
          case 'pepe':
            characterImg.src = 'pepe.png';
            break;
          default:
            characterImg.src = 'ace.png'; // Default character
        }
      } else {
        characterImg.src = 'ace.png'; // Default character
      }
    });

         function saveCharacterSnapshot() {
       // Create a temporary container for the Instagram story format
       const storyContainer = document.createElement('div');
       storyContainer.style.position = 'fixed';
       storyContainer.style.top = '-9999px';
       storyContainer.style.left = '-9999px';
       storyContainer.style.width = '1080px';
       storyContainer.style.height = '1920px';
       storyContainer.style.overflow = 'hidden';
       
       // Add background image (room-2 for boys, room-1 for girls)
       const bgImg = document.createElement('img');
       bgImg.src = 'room-2.png'; // This is the boys room
       bgImg.style.position = 'absolute';
       bgImg.style.top = '0';
       bgImg.style.left = '0';
       bgImg.style.width = '100%';
       bgImg.style.height = '100%';
       bgImg.style.objectFit = 'cover';
       storyContainer.appendChild(bgImg);
       
       // Add semi-transparent overlay for better text readability
       const overlay = document.createElement('div');
       overlay.style.position = 'absolute';
       overlay.style.top = '0';
       overlay.style.left = '0';
       overlay.style.width = '100%';
       overlay.style.height = '100%';
       overlay.style.background = 'rgba(0, 0, 0, 0.3)';
       storyContainer.appendChild(overlay);
       
       // Add logo to the top
       const logo = document.createElement('img');
       logo.src = 'logo.png';
       logo.style.position = 'absolute';
       logo.style.top = '80px';
       logo.style.left = '50%';
       logo.style.transform = 'translateX(-50%)';
       logo.style.width = '350px';
       logo.style.zIndex = '10';
       storyContainer.appendChild(logo);
       
       // Create character container - positioned in center
       const charContainer = document.createElement('div');
       charContainer.style.position = 'absolute';
       charContainer.style.top = '50%';
       charContainer.style.left = '50%';
       charContainer.style.transform = 'translate(-50%, -50%)';
       charContainer.style.width = '800px';
       charContainer.style.height = '1200px';
       charContainer.style.zIndex = '5';
       
       // Add character image with proper scaling
       const characterImg = document.getElementById('character');
       const charClone = characterImg.cloneNode(true);
       charClone.style.position = 'absolute';
       charClone.style.top = '50%';
       charClone.style.left = '50%';
       charClone.style.transform = 'translate(-50%, -50%)';
       charClone.style.width = '600px';
       charClone.style.height = 'auto';
       charClone.style.maxHeight = '100%';
       charClone.style.objectFit = 'contain';
       charContainer.appendChild(charClone);
       
       // Add all outfit overlays with matching positioning
       const outfitOverlays = document.querySelectorAll('.outfit-overlay');
       outfitOverlays.forEach(overlay => {
         const overlayClone = overlay.cloneNode(true);
         overlayClone.style.position = 'absolute';
         overlayClone.style.top = '50%';
         overlayClone.style.left = '50%';
         overlayClone.style.transform = 'translate(-50%, -50%)';
         overlayClone.style.width = '600px';
         overlayClone.style.height = 'auto';
         overlayClone.style.maxHeight = '100%';
         overlayClone.style.objectFit = 'contain';
         charContainer.appendChild(overlayClone);
       });
       
       storyContainer.appendChild(charContainer);
       
       // Add watermark text at bottom
       const watermark = document.createElement('div');
       watermark.textContent = 'FirepitFashion.com';
       watermark.style.position = 'absolute';
       watermark.style.bottom = '100px';
       watermark.style.left = '50%';
       watermark.style.transform = 'translateX(-50%)';
       watermark.style.color = 'white';
       watermark.style.fontSize = '36px';
       watermark.style.fontFamily = 'NeuePixelSans, sans-serif';
       watermark.style.textShadow = '3px 3px 6px rgba(0,0,0,0.8)';
       watermark.style.zIndex = '10';
       storyContainer.appendChild(watermark);
       
       // Temporarily add to document
       document.body.appendChild(storyContainer);
       
       // Capture the story container
       html2canvas(storyContainer, {
         useCORS: true,
         backgroundColor: null,
         width: 1080,
         height: 1920,
         scale: 1
       }).then(canvas => {
         const link = document.createElement('a');
         link.download = 'firepit-fashion-story.png';
         link.href = canvas.toDataURL('image/png');
         link.click();
         
         // Remove temporary container
         document.body.removeChild(storyContainer);
       }).catch(error => {
         console.error('Error saving outfit:', error);
         alert('Error saving outfit. Please try again.');
         // Remove temporary container on error
         if (document.body.contains(storyContainer)) {
           document.body.removeChild(storyContainer);
         }
       });
     }
  </script>
  <div class="wardrobe-scene">
    <img src="room-2.png" alt="Room Background" class="background">
    <!-- Row 1 (Top shelf â€“ hoodies, shirts, ascot) -->
    <img src="boys-wardrobe/pink-hoodie-asset.png" alt="Pink Hoodie" class="wardrobe-item" style="left: 45%; top: 15%; width: 11.55%;" onclick="addOutfit('pink-hoodie')">
    <img src="boys-wardrobe/green-shirt.png" alt="Green Shirt" class="wardrobe-item" style="left: 55%; top: 8%; width: 11.55%;" onclick="addOutfit('green-shirt')">
    <img src="boys-wardrobe/ascot-asset.png" alt="Ascot" class="wardrobe-item" style="left: 90%; top: 15%; width: 4.2%;" onclick="addOutfit('ascot')">
    
    <!-- Row 2 (Second shelf â€“ T-shirts & polos) -->
    <img src="boys-wardrobe/meatball-shirt-asset.png" alt="Meatball Shirt" class="wardrobe-item" style="left: 45%; top: 42%; width: 11.55%;" onclick="addOutfit('meatball-shirt')">
    <img src="boys-wardrobe/tank-asset.png" alt="Tank" class="wardrobe-item" style="left: 57%; top: 42%; width: 7.7%;" onclick="addOutfit('tank')">
    <img src="boys-wardrobe/linen-shirt-asset.png" alt="Linen Shirt" class="wardrobe-item" style="left: 66%; top: 42%; width: 11.55%;" onclick="addOutfit('linen-shirt')">
    <img src="boys-wardrobe/striped-shirt-asset.png" alt="Striped Shirt" class="wardrobe-item" style="left: 77%; top: 42%; width: 11.55%;" onclick="addOutfit('striped-shirt')">
    
    <!-- Row 3 (Third shelf â€“ shorts & pants) -->
    <img src="boys-wardrobe/camo-pants-asset.png" alt="Camo Pants" class="wardrobe-item" style="left: 45%; top: 64%;" onclick="addOutfit('camo-pants')">
    <img src="boys-wardrobe/navy-shorts-asset.png" alt="Navy Shorts" class="wardrobe-item" style="left: 55.5%; top: 64%;" onclick="addOutfit('navy-shorts')">
    <img src="boys-wardrobe/striped-shorts-asset.png" alt="Striped Shorts" class="wardrobe-item" style="left: 66%; top: 64%;" onclick="addOutfit('striped-shorts')">
    <img src="boys-wardrobe/pink-shorts-asset.png" alt="Pink Shorts" class="wardrobe-item" style="left: 77%; top: 64%;" onclick="addOutfit('pink-shorts')">
    <img src="boys-wardrobe/white-jeans-asset.png" alt="White Jeans" class="wardrobe-item" style="left: 88.5%; top: 64%; width: 7.7%;" onclick="addOutfit('white-jeans')">
    
    <!-- Row 4 (Bottom shelf â€“ shoes) -->
    <img src="boys-wardrobe/loafers-asset.png" alt="Loafers" class="wardrobe-item" style="left: 47%; top: 87%; width: 5%;" onclick="addOutfit('loafers')">
    <img src="boys-wardrobe/sandals-asset.png" alt="Sandals" class="wardrobe-item" style="left: 54%; top: 87%; width: 5%;" onclick="addOutfit('sandals')">
  </div>
  <img src="ace.png" alt="Character" class="character" id="character">
  <img src="logo.png" alt="Logo" class="logo" onclick="window.location.href='index.html'">
  <button class="save-button" onclick="saveCharacterSnapshot()">SAVE ðŸ“¸</button>
</body>
</html> 