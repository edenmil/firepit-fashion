<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Room - Firepit Fashion</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    @font-face {
      font-family: 'NeuePixelSans';
      src: url('NeuePixelSans.ttf') format('truetype');
    }
    
    body {
      margin: 0;
      padding: 0;
      background: #074244;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .wardrobe-scene {
      position: relative;
      width: 100vw;
      max-width: 1200px;
      aspect-ratio: 16/9;
    }
    
    .background {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      object-fit: contain;
      z-index: 1;
    }
    
    .character {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      object-fit: contain;
      z-index: 2;
    }
    
    .wardrobe-item {
      position: absolute;
      width: 10.5%; /* Main default size - 50% bigger */
      cursor: pointer;
      transition: transform 0.2s ease;
      z-index: 5;
    }
    
    .wardrobe-item:hover {
      transform: translateY(-10px);
    }
    
    .logo {
      position: absolute;
      top: 20px;
      left: 20px;
      width: 200px;
      z-index: 10; /* Increased for clickability */
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    
    .logo:hover {
      transform: scale(1.05);
    }
    
    .save-button {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 15px 30px;
      font-family: 'NeuePixelSans', sans-serif;
      font-size: 18px;
      border-radius: 10px;
      cursor: pointer;
      z-index: 10;
      transition: transform 0.2s ease;
    }
    
    .save-button:hover {
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <script>
         function addOutfit(outfitType) {
       console.log('Adding outfit:', outfitType);
       const existingOutfit = document.querySelector(`.outfit-overlay[data-outfit="${outfitType}"]`);
       const existingSaveOutfit = document.querySelector(`#save-outfits img[data-outfit="${outfitType}"]`);
       
       if (existingOutfit) {
         console.log('Removing outfit:', outfitType);
         existingOutfit.remove();
         if (existingSaveOutfit) existingSaveOutfit.remove();
       } else {
         console.log('Adding outfit:', outfitType);
         
         // Add to visible game area
         const outfitOverlay = document.createElement('img');
         outfitOverlay.src = `boys-cartoon-clothes/${outfitType}.png`;
         outfitOverlay.className = 'outfit-overlay';
         outfitOverlay.setAttribute('data-outfit', outfitType);
         outfitOverlay.style.position = 'absolute';
         outfitOverlay.style.top = '50%';
         outfitOverlay.style.left = '50%';
         outfitOverlay.style.transform = 'translate(-50%, -50%)';
         outfitOverlay.style.maxWidth = '100%';
         outfitOverlay.style.maxHeight = '100%';
         outfitOverlay.style.width = 'auto';
         outfitOverlay.style.height = 'auto';
         outfitOverlay.style.objectFit = 'contain';
         outfitOverlay.style.zIndex = '3';
         document.body.appendChild(outfitOverlay);

         // Add to save area
         const saveOutfit = document.createElement('img');
         saveOutfit.src = `boys-cartoon-clothes/${outfitType}.png`;
         saveOutfit.setAttribute('data-outfit', outfitType);
         saveOutfit.style.position = 'absolute';
         saveOutfit.style.top = '50%';
         saveOutfit.style.left = '50%';
         saveOutfit.style.transform = 'translate(-50%, -50%)';
         saveOutfit.style.width = '600px';
         saveOutfit.style.height = 'auto';
         saveOutfit.style.maxHeight = '100%';
         saveOutfit.style.objectFit = 'contain';
         document.getElementById('save-outfits').appendChild(saveOutfit);

         outfitOverlay.onerror = function() { console.error('Failed to load outfit image:', outfitType); };
         outfitOverlay.onload = function() { console.log('Outfit image loaded successfully:', outfitType); };
       }
     }

    function getUrlParameter(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

         window.addEventListener('load', function() {
       const character = getUrlParameter('character');
       const characterImg = document.getElementById('character');
       const saveCharacterImg = document.getElementById('save-character');
       
       let characterSrc = 'ace.png'; // Default
       
       if (character) {
         switch(character) {
           case 'ace':
             characterSrc = 'ace.png';
             break;
           case 'nick':
             characterSrc = 'nick.png';
             break;
           case 'pepe':
             characterSrc = 'pepe.png';
             break;
           default:
             characterSrc = 'ace.png';
         }
       }
       
       characterImg.src = characterSrc;
       saveCharacterImg.src = characterSrc;
     });

         function saveCharacterSnapshot() {
       const saveArea = document.getElementById("save-area");
       
       html2canvas(saveArea, {
         backgroundColor: null,
         useCORS: true,
         scale: 1 // keeps 1:1 scale (no weird zooming)
       }).then(canvas => {
         const link = document.createElement('a');
         link.download = 'firepit-fashion-story.png';
         link.href = canvas.toDataURL('image/png');
         link.click();
       }).catch(error => {
         console.error('Error saving outfit:', error);
         alert('Error saving outfit. Please try again.');
       });
     }
  </script>
     <!-- Hidden save area for Instagram story format -->
   <div id="save-area" style="position: fixed; top: -9999px; left: -9999px; width: 1080px; height: 1920px; overflow: hidden;">
     <img src="room-2.png" alt="Room Background" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
     <img src="logo.png" alt="Logo" style="position: absolute; top: 100px; left: 50%; transform: translateX(-50%); width: 400px;">
     <div id="save-character-container" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 800px; height: 1200px;">
       <img id="save-character" src="ace.png" alt="Character" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 600px; height: auto; max-height: 100%; object-fit: contain;">
       <div id="save-outfits" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 600px; height: 100%;"></div>
     </div>
   </div>

   <div class="wardrobe-scene">
     <img src="room-2.png" alt="Room Background" class="background">
    <!-- Row 1 (Top shelf â€“ hoodies, shirts, ascot) -->
    <img src="boys-wardrobe/pink-hoodie-asset.png" alt="Pink Hoodie" class="wardrobe-item" style="left: 45%; top: 15%; width: 11.55%;" onclick="addOutfit('pink-hoodie')">
    <img src="boys-wardrobe/green-shirt.png" alt="Green Shirt" class="wardrobe-item" style="left: 55%; top: 8%; width: 11.55%;" onclick="addOutfit('green-shirt')">
    <img src="boys-wardrobe/ascot-asset.png" alt="Ascot" class="wardrobe-item" style="left: 90%; top: 15%; width: 4.2%;" onclick="addOutfit('ascot')">
    
    <!-- Row 2 (Second shelf â€“ T-shirts & polos) -->
    <img src="boys-wardrobe/meatball-shirt-asset.png" alt="Meatball Shirt" class="wardrobe-item" style="left: 45%; top: 42%; width: 11.55%;" onclick="addOutfit('meatball-shirt')">
    <img src="boys-wardrobe/tank-asset.png" alt="Tank" class="wardrobe-item" style="left: 57%; top: 42%; width: 7.7%;" onclick="addOutfit('tank')">
    <img src="boys-wardrobe/linen-shirt-asset.png" alt="Linen Shirt" class="wardrobe-item" style="left: 66%; top: 42%; width: 11.55%;" onclick="addOutfit('linen-shirt')">
    <img src="boys-wardrobe/striped-shirt-asset.png" alt="Striped Shirt" class="wardrobe-item" style="left: 77%; top: 42%; width: 11.55%;" onclick="addOutfit('striped-shirt')">
    
    <!-- Row 3 (Third shelf â€“ shorts & pants) -->
    <img src="boys-wardrobe/camo-pants-asset.png" alt="Camo Pants" class="wardrobe-item" style="left: 45%; top: 64%;" onclick="addOutfit('camo-pants')">
    <img src="boys-wardrobe/navy-shorts-asset.png" alt="Navy Shorts" class="wardrobe-item" style="left: 55.5%; top: 64%;" onclick="addOutfit('navy-shorts')">
    <img src="boys-wardrobe/striped-shorts-asset.png" alt="Striped Shorts" class="wardrobe-item" style="left: 66%; top: 64%;" onclick="addOutfit('striped-shorts')">
    <img src="boys-wardrobe/pink-shorts-asset.png" alt="Pink Shorts" class="wardrobe-item" style="left: 77%; top: 64%;" onclick="addOutfit('pink-shorts')">
    <img src="boys-wardrobe/white-jeans-asset.png" alt="White Jeans" class="wardrobe-item" style="left: 88.5%; top: 64%; width: 7.7%;" onclick="addOutfit('white-jeans')">
    
    <!-- Row 4 (Bottom shelf â€“ shoes) -->
    <img src="boys-wardrobe/loafers-asset.png" alt="Loafers" class="wardrobe-item" style="left: 47%; top: 87%; width: 5%;" onclick="addOutfit('loafers')">
    <img src="boys-wardrobe/sandals-asset.png" alt="Sandals" class="wardrobe-item" style="left: 54%; top: 87%; width: 5%;" onclick="addOutfit('sandals')">
  </div>
  <img src="ace.png" alt="Character" class="character" id="character">
  <img src="logo.png" alt="Logo" class="logo" onclick="window.location.href='index.html'">
  <button class="save-button" onclick="saveCharacterSnapshot()">SAVE ðŸ“¸</button>
</body>
</html> 